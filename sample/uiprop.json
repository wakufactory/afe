{"version":1,"settings":{"name":"uiprop"},"scenes":["<a-assets>\n  \t<img id=\"floortex\" src=\"assets/tex1024.png\">\n</a-assets>\n<!--floor-->\n<a-plane position=\"0 -0.001 0\" rotation=\"-90 0 0\" width=\"200\" height=\"200\" color=\"#888\" material=\"shader:flat;src: #floortex;repeat:20 20;\"></a-plane>\n<!--sky-->\n<a-sky  material=\"shader:flat;color:#66a\" radius=\"100\" segments-height=\"6\" segments-width=\"12\"></a-sky>\n\n<!--axis-->\n<a-entity  line = \"start:0 0 0 ; end:200 0 0; color:#f00\"\n           line__2 = \"start:0 0 0 ; end:0 200 0; color:#0f0\"\n\t       line__3 = \"start:0 0 0 ; end:0 0 200; color:#00f\" ></a-entity>\n\n<!--sample objects-->\n<a-entity id=base  position=\"0 0.5 0\">\n\t<a-box scale=\"1 1 1\" rot  rotation=\"0 0 0\" position=\"0 0 0\" color=\"#f4f\" shadow></a-box>\n\t<a-box scale=\"1 1 1\" rot  rotation=\"0 30 0\" position=\"1 1 0\" color=\"#ff4\" shadow></a-box>\n</a-entity>\n\n<!--lights-->\n<a-entity light=\"type: ambient; color: #888\"></a-entity>\n<a-entity light=\"type: directional; color: #FFF; intensity: 0.6; castShadow:false;\" position=\"-0.5 1 1\" shadow ></a-entity>\n\n<!--camera-->\n<a-entity id=\"camrig\"  position=\"0 1.5 3\" vrheight padmoved> \n\t<a-entity id=\"camera\" camera  look-controls wasd-controls=\"acceleration:10\"></a-entity>\n\t<!--vr controller-->\n\t<a-entity oculus-touch-controls=\"hand: left; model:false\"  exitvr></a-entity>\n\t<a-entity oculus-touch-controls=\"hand: right; model:false\" padmove=\"gripud:true\" exitvr></a-entity>\n</a-entity>"],"components":"//scene init component \nPOXA.registerComponent('sceneinit', {\n\tschema: {\n\t\tquery:{type:\"array\"}\n\t},\n\tinit:function() {\n\t\tPOXA.log(\"start\")\n\t\t// set ui property\n\t\tPOXA.setUIproperty(this,{\n\t\t\t\"rot\":{\"name\":\"rot y\",\"min\":0,\"max\":360,\"value\":90},\n\t\t\t\"height\":{\"name\":\"height\",\"min\":0,\"max\":2,\"value\":1},\n\t\t\t},p=>{\t// called if value changed \n\t\t\t\tconsole.log(p)\n\t\t\t\tthis.el.querySelectorAll(\"[rot]\").forEach((o)=>{\n\t\t\t\t\to.emit(\"uiprop\",p)\t//emit property\n\t\t\t\t})\n\t\t\t})\n\t},\n\ttick:function(time,dur) {\n\t\t// called each frame \n\t}\n})\n\n//moving component\nPOXA.registerComponent('rot', {\n\tinit:function() {\n\t  // listen property change event \n\t  this.el.addEventListener(\"uiprop\",ev=>{\n\t\t\tconst dt = ev.detail\n\t  \tif(dt.key ==\"rot\") {\n\t  \t\tconst ry = THREE.Math.degToRad(dt.value)\n\t  \t\tthis.el.object3D.rotation.set(this.rot.x,this.rot.y+ry,this.rot.z)\n\t  \t}\n\t  \tif(dt.key ==\"height\") {\n\t  \t\tthis.el.object3D.position.set(this.pos.x,this.pos.y+dt.value,this.pos.z)\n\t  \t}\n\t  })\n\t},\n\tupdate:function(odata) {\n\t  this.rot = this.el.object3D.rotation.clone()\n\t  this.pos = this.el.object3D.position.clone()\t\t\n\t},\n\ttick:function(time, timeDelta) {\n\n\t}\n})"}